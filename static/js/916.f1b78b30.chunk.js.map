{"version":3,"file":"static/js/916.f1b78b30.chunk.js","mappings":"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","sources":["component/charBlock/CharBlock.js"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n    TimeScale\r\n  } from 'chart.js';\r\nimport 'chartjs-adapter-date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\n\r\nimport {Form, Col, Spinner} from 'react-bootstrap';\r\n\r\n\r\nfunction CharBlock({dateTo, dateFrom, getDataByDays, countriesList, wasCharOpen}) {\r\n    const [dataByDays, setDataPerDay] = useState(null);\r\n    const [filterId, setFilterId] = useState('all');\r\n    const [isSmallScrean, setIsSmallScrean ] = useState(false)\r\n    const [dataFromWhenOPen, setDataFromWhenOPen] = useState(null);\r\n    const [dataToWhenOPen, setDataToWhenOPen] = useState(null);\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsSmallScrean(window.innerWidth < 992);\r\n        };\r\n        handleResize();\r\n\r\n        window.addEventListener('resize', handleResize);  \r\n        return () => window.removeEventListener('resize', handleResize);\r\n        \r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            getDataByDays(filterId)\r\n            .then(res => {\r\n                setDataPerDay(res)\r\n\r\n            })  \r\n        },150)\r\n    }, [filterId])\r\n\r\n    useEffect(() => {\r\n        if(!wasCharOpen) return;\r\n        if(dateFrom === dataFromWhenOPen && dateTo === dataToWhenOPen) return;\r\n        setDataToWhenOPen(dateTo);\r\n        setDataFromWhenOPen(dateFrom);\r\n        \r\n        if(dateTo && dateFrom){\r\n            setTimeout(() => {\r\n                getDataByDays(filterId)\r\n                .then(res => {\r\n                    setDataPerDay(res)\r\n    \r\n                })  \r\n            },150)     \r\n        }   \r\n    },[dateTo, dateFrom, wasCharOpen])\r\n   \r\n    let optionOfSelectOfCountries;\r\n    if(countriesList) {\r\n        optionOfSelectOfCountries =  countriesList.map((item,i) => {\r\n            return <option key={i} value={item}>{item}</option>;\r\n        })\r\n    }\r\n\r\n    ChartJS.register(\r\n        CategoryScale,\r\n        LinearScale,\r\n        PointElement,\r\n        LineElement,\r\n        Title,\r\n        Tooltip,\r\n        Legend,\r\n        TimeScale,     \r\n      );\r\n\r\n    const dataChar = {\r\n        datasets: [\r\n          {\r\n            label: 'Заболевания',\r\n            data: dataByDays ? dataByDays.map(item => ({x: item.date, y: item.cases})): [],\r\n            borderColor: '#ffc107',\r\n            backgroundColor: '#ffc107',\r\n            pointStyle: false,\r\n            tension: 0.1\r\n          },\r\n          {\r\n            label: 'Смерти',\r\n            data: dataByDays ? dataByDays.map(item => ({x: item.date, y: item.deaths})) : [],\r\n            borderColor: '#dc3545',\r\n            backgroundColor: '#dc3545',\r\n            pointStyle: false,\r\n            tension: 0.1\r\n          }\r\n        ],\r\n    };\r\n    const optoinsBigChar = {\r\n        responsive: true,\r\n        plugins: {\r\n            legend: {\r\n                position: 'top',\r\n                display: true,\r\n                labels: {\r\n                    font: {\r\n                        size: 20\r\n                    }\r\n                }\r\n              },\r\n            title:{ \r\n                display: true,\r\n                text: 'График заболеваемости и смертности',\r\n                font: {\r\n                    size: 24\r\n                }\r\n            }\r\n        },\r\n        scales: {\r\n            x: {\r\n                adapters: {\r\n                    date: {\r\n                      locale: ruLocale,\r\n                    },\r\n                  },\r\n                type: 'time',\r\n            },\r\n            y: {\r\n                title: {\r\n                    display: true,\r\n                    text: 'Количество случаев',\r\n                  },\r\n            }\r\n        }\r\n    }\r\n\r\n    const optionsSmallChar = {\r\n        responsive: false,\r\n        plugins: {\r\n            legend: {\r\n                position: 'left',\r\n                align: 'start',\r\n                position: 'top',\r\n                display: true,\r\n                labels: {\r\n                    font: {\r\n                        size: 14\r\n                    }\r\n                }\r\n              },\r\n            title:{ \r\n                align: 'start',\r\n                display: true,\r\n                text: 'График заболеваемости и смертности',\r\n                font: {\r\n                    size: 16\r\n                }\r\n            },\r\n            zoom: {\r\n                zoom: {\r\n                  enabled: true,\r\n                  mode: 'x',\r\n                },\r\n                pan: {\r\n                  enabled: true,\r\n                  mode: 'x',\r\n                },\r\n            },\r\n        },\r\n        scales: {\r\n            x: {\r\n                adapters: {\r\n                    date: {\r\n                      locale: ruLocale,\r\n                    },\r\n                  },\r\n                type: 'time',\r\n            },\r\n            y: {\r\n                title: {\r\n                    display: true,\r\n                  },\r\n            }\r\n        }\r\n    };\r\n\r\n    const smallChar = isSmallScrean && dataByDays? <Line\r\n                width={800}\r\n                height={400}\r\n                data={dataChar}\r\n                options={optionsSmallChar}          \r\n            />: null;\r\n    const bigChar = !smallChar && dataByDays ? <Line\r\n                data={dataChar}\r\n                options={optoinsBigChar}          \r\n            />: null;    \r\n    const spinner = !bigChar && !smallChar ? <Col className='d-flex justify-content-center'>\r\n                                                <Spinner animation=\"border\" role=\"status\" className=\"m-2\">\r\n                                                    <span className=\"visually-hidden\">Loading...</span>\r\n                                                </Spinner>\r\n                                            </Col> : null;\r\n    return (\r\n       <>\r\n            <Form.Select aria-label=\"Default select example\" value={filterId} onChange={(e) => setFilterId(e.target.value)}>\r\n                <option value='all'>Все страны</option>;\r\n                {optionOfSelectOfCountries}\r\n            </Form.Select>\r\n            <Col className=\"overflow-auto\">\r\n                {smallChar}\r\n                {bigChar}\r\n                {spinner}\r\n            </Col>\r\n       </>    \r\n    );\r\n}\r\n\r\nexport default CharBlock;"],"names":["_ref","_legend","optionOfSelectOfCountries","dateTo","dateFrom","getDataByDays","countriesList","wasCharOpen","_useState","useState","_useState2","_slicedToArray","dataByDays","setDataPerDay","_useState3","_useState4","filterId","setFilterId","_useState5","_useState6","isSmallScrean","setIsSmallScrean","_useState7","_useState8","dataFromWhenOPen","setDataFromWhenOPen","_useState9","_useState10","dataToWhenOPen","setDataToWhenOPen","useEffect","handleResize","window","innerWidth","addEventListener","removeEventListener","setTimeout","then","res","map","item","i","_jsx","value","children","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","TimeScale","dataChar","datasets","label","data","x","date","y","cases","borderColor","backgroundColor","pointStyle","tension","deaths","optoinsBigChar","responsive","plugins","legend","position","display","labels","font","size","title","text","scales","adapters","locale","ruLocale","type","optionsSmallChar","align","_defineProperty","zoom","enabled","mode","pan","smallChar","Line","width","height","options","bigChar","spinner","Col","className","Spinner","animation","role","_jsxs","_Fragment","Form","onChange","e","target"],"sourceRoot":""}